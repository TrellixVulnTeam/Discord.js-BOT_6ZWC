"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = (streamParser) => {
    streamParser.on('data', (obj) => {
        var _a, _b, _c, _d;
        if (obj.level !== 'error')
            return;
        // Known errors are not printed
        if ((_a = obj['err'].code) === null || _a === void 0 ? void 0 : _a.startsWith('ERR_PNPM_'))
            return;
        console.log((_c = (_b = obj['err']) === null || _b === void 0 ? void 0 : _b.message) !== null && _c !== void 0 ? _c : obj['message']); // tslint:disable-line
        if ((_d = obj['err']) === null || _d === void 0 ? void 0 : _d.stack) { // tslint:disable-line
            console.log(`\n${obj['err'].stack}`); // tslint:disable-line
        }
    });
};
